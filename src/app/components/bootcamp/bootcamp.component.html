<div class="container-fluid m-auto mt-5 col-6">
  <h1>Bootcamp Enrollment Form</h1>
  <form class="form" #userForm="ngForm" novalidate (ngSubmit)="onSubmit()">

    <div class="form-group mb-3">
      <label for="name">Name</label>
      <input 
        #name="ngModel" 
        [(ngModel)]="userModel.name" 
        [class.is-invalid]="name.invalid && name.touched" 
        type="text" 
        name="name" 
        class="form-control mb-0" 
        id="name" 
        required 
        placeholder="Name">
        <small *ngIf="name.invalid && name.touched" class="text-danger">Name is required</small>
    </div>
    
    <div class="form-group mb-3">
      <label for="email">Email</label>
      <input 
        required
        #email="ngModel"
        [(ngModel)]="userModel.email" 
        [class.is-invalid]="email.invalid && email.touched" 
        type="email" 
        name="email" 
        class="form-control" 
        id="email" 
        placeholder="Email">
    </div>
   
    <div class="form-group mb-3">
      <label for="phone">Phone</label>
      <input 
        required
        #phone="ngModel"
        [(ngModel)]="userModel.phone" 
        [class.is-invalid]="phone.invalid && phone.touched"
        pattern="^\d{10}$"
        type="tel" 
        name="phone" 
        class="form-control mb-0" 
        id="phone" 
        placeholder="Phone">
          <div *ngIf="phone.errors && (phone.invalid && phone.touched)">
            <small *ngIf="phone.errors.required" class="text-danger">Phone number is required</small>
            <small *ngIf="phone.errors.pattern" class="text-danger">Phone number needs to be ten digits</small>
          </div>
    </div>
    <div class="form-group mb-3">
      <select 
        (blur)="validateTopic(topic.value)"
        (change)="validateTopic(topic.value)"
        required
        #topic="ngModel"
        
        [(ngModel)]="userModel.topic" 
        [class.is-invalid]="topic.invalid && topic.touched"
        class="form-select" 
        name="topic" 
        id="topic">
        <option class="form-select-option" value="" >I am interested in</option>
        <option *ngFor="let topic of topics">{{topic}}</option>
      </select>
        <small *ngIf="topic.touched && validateTopic(topic.value)" class="text-danger">Topic is required</small>
    </div>
    <div class="form-group mb-3">
      <label for="timePreference">Time Preference</label>
      <div class="form-check">
        <input 
          #timePreference="ngModel"
          [(ngModel)]="userModel.timePreference" 
          [class.is-invalid]="timePreference.invalid && timePreference.touched"
          class="form-check-input" 
          type="radio" 
          name="timePreference" 
          id="timePreference" 
          value="morning">
        <label for="morning">Morining (9AM - 12PM)</label>
      </div>
      <div class="form-check">
        <input  
          #timePreference="ngModel"
          [(ngModel)]="userModel.timePreference" 
          [class.is-invalid]="timePreference.invalid && timePreference.touched"
          class="form-check-input" 
          type="radio" 
          name="timePreference" 
          id="timePreference" 
          value="evening">
        <label for="morning">Evening (5PM - 8PM)</label>
      </div>
    </div>
    <div class="form-group mb-3">
      <div class="form-check">
        <input 
          #subscribe="ngModel"
          [class.is-invalid]="subscribe.invalid && subscribe.touched"
          [(ngModel)]="userModel.subscribe" 
          class="form-check-input" 
          type="checkbox" 
          name="subscribe" 
          id="subscribe">
        <label class="form-check-label" for="">Send me promotional offers</label>
      </div>
    </div>

    <button [disabled]="userForm.form.invalid" type="submit" class="btn btn-primary">Submit</button>
  </form>
</div>